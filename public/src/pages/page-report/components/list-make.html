<link rel="import" href="./../../../layout/shared-styles.html">
<link rel="import" href="./../../components/g2g-logic-behavior.html">

<link rel="import" href="../../../redux-behavior.html">

<link rel="import" href="../../../nylon-behavior.html">

<link rel="import" href="../../components/validateFormBehaviors.html">

<link rel="import" href="../../../../bower_components/iron-validator-behavior/iron-validator-behavior.html">

<dom-module id="list-make">
    <template>
        <style include="shared-styles">
             :host {
                display: block;
            }
        </style>
        <div class="flex horizontal end-justified layout buttons">
            <paper-button raised class="gl-btn-primary" on-tap="addValue" autofocus>[[localizeReport.add]]</paper-button>
        </div>
        <gl-form-input always-float-label required label="[[localizeReport.field]]" class="margin-top required" required value="{{data.req.field}}"></gl-form-input>
        <vaadin-grid id="material" class="material" style="height:300px" aria-label="B" items="{{data.req.value}}">

            <vaadin-grid-column width="50px" flex-grow="0">
                <template class="header text-center">[[localizeReport.order]]</template>
                <template>
                    {{changeString2Num(item.*,'no')}}
                    <div class="text-center">
                        <gl-form-input class="margin-top required" required type="number" style="width:90%" value="{{item.no}}"></gl-form-input>
                    </div>

                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="200px" flex-grow="0">
                <template class="header text-center">[[localizeReport.Label]]</template>
                <template>
                    <div class="text-center">
                        <gl-form-input class="margin-top required" required style="width:90%" value="{{item.label}}"></gl-form-input>
                    </div>
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="200px" flex-grow="0">
                <template class="header text-center">[[localizeReport.value]]</template>
                <template>
                    <div class="text-center">
                        <gl-form-input class="margin-top required" required style="width:90%" value="{{item.value}}"></gl-form-input>
                    </div>
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="100px" flex-grow="0">
                <template class="header text-center">[[localizeReport.delete]]</template>
                <template>
                    <div class="text-center">
                        <paper-icon-button data="{{item}}" icon="delete" on-tap="_delete"></paper-icon-button>
                    </div>
                </template>
            </vaadin-grid-column>
        </vaadin-grid>
    </template>
    <script>
        Polymer({
            is: 'list-make',
            behaviors: [ReduxBehavior, nylonBehavior, g2gLogicBehavior,
                ValidateFormBehavior, Polymer.IronValidatorBehavior],
            properties: {
                data: {
                    type: Object,
                    notify: true
                },
                localizeReport: {
                    statePath: 'i18n.report'
                },
                value: {
                    type: Array,
                    value: [
                        {
                            no: 1,
                            label: 'ทดสอบ',
                            value: 'value'
                        },
                    ]
                }
            },
            addValue() {
                this.push('data.req.value', {
                    no: 1,
                    label: '',
                    value: ''
                })
            },
            _delete(e) {
                // splice 
                let index = e.model.__data__.index
                this.splice('data.req.value', index, 1)
                // console.log(e.model.__data__.index);
            },
        });
    </script>
</dom-module>